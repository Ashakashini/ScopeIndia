@model ScopeIndia.Models.PasswordSettingModel

<div class="text-center">
    <div class="container bg-success h-50 w-50">
        <form asp-controller="WebHome" asp-action="PasswordSetting" method="post" enctype="multipart/form-data">
            <fieldset>
                <legend>PASSWORD SETTING</legend>

                
                <div class="form-floating">
                    <input asp-for="Email" class="form-control col-6" id="Email" hidden value="@ViewBag.Email"/>
                   
                </div>
                <br />

                
                <div class="form-floating">
                    <input asp-for="password" type="password" class="form-control" required 
                           pattern="^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,}$" 
                           title="Password must contain at least 8 characters, including one letter and one number" />
                    <label asp-for="password" class="form-label col-6">password</label>
                    <small id="passwordHelp" class="form-text text-muted">Password must contain at least 8 characters, one letter, and one number.</small>
                    <span asp-validation-for="password" class="text-danger"></span>
                </div>
                <br/>

               
                <div class="form-floating">
                    <input asp-for="ConfirmPassword" type="password" class="form-control" required />
                    <label asp-for="ConfirmPassword" class="form-label col-6">Confirm Password</label>
                    <span asp-validation-for="ConfirmPassword" class="text-danger"></span>
                </div>
                <br />

                <div class="form-floating">
                    <button class="btn btn-success" type="submit">Password Setting</button>
                </div>
                <br />
            </fieldset>
        </form>
    </div>
</div>

<!-- Validation Summary -->
@Html.ValidationSummary(true, "", new { @class = "text-danger" })
@* Inline Script in the View *@
@section Scripts {
    <script>
        // JavaScript to validate if passwords match before submitting
        const form = document.querySelector('form');
        form.addEventListener('submit', function(event) {
            const newPassword = document.getElementById('newPassword').value;
            const confirmPassword = document.getElementById('confirmPassword').value;

            if (newPassword !== confirmPassword) {
                alert("The new password and confirm password do not match.");
                event.preventDefault(); // Prevent form submission if passwords don't match
            }
        });
    </script>
}
